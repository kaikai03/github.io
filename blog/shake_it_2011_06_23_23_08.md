Title: 摇一摇
Date: 2011-06-23 23:08
Modified: 2011-06-23 23:08
Category: iDev
Tags: Object-C,algorithm,iOS
Slug: shake_it_2011_06_23_23_08
Authors: kai_kai03
Summary: “用力摇、久一点，可以提供您的中奖概率”

## 前情 ##
今天在做一个摇一摇，简单的if判断太lowB，体验也不好，于是用卷积和高通滤波，让用户多反复来两下，还要用点力，需要有能量的积累才能有反馈，且为Summary提到内容的留坑。

## 代码 ##
	
	//高通滤波器，用来生成下个函数highPassFilter中的alpha
	//updateFrequency我自己用的是60，cutoff现在是5.0
	//还没调到最好，目前只如果初始用用甩的力度的话还是能立马触发，没力弄了。
	-(double)highPassAlpha:(double)updateFrequency pCutoffFrequency:(double)cutFreq
	{
	    double dt = 1.0 / updateFrequency;
	    double RC = 1.0 / cutFreq;
	    double filterConstant = dt / (dt + RC);
	    
	    return filterConstant;
	}
	
	//lastX  lastY  lastZ 是最后拿来用的值
	-(void)highPassFilter:(UIAcceleration*)accel 
	{
	    x = alpha * (x + accel.x - lastX);
		y = alpha * (y + accel.y - lastY);
		z = alpha * (z + accel.z - lastZ);
	    lastX = accel.x;
		lastY = accel.y;
		lastZ = accel.z;
	}
	
