Title: 一个objc对象的bug
Date: 2011-04-21 22:13
Modified: 2011-04-21 22:13
Category: iDev
Tags: Object-C,iOS
Slug: objc_bug_2011_04_21_22_13
Authors: kai_kai03
Summary: array中的dict泄漏

##发现一只小虫子

&#160; &#160; &#160; &#160;这两天在视频软解的调试过程中发现，objc的array对象有bug，一个array对象快速的插入、弹出dict对象，会有一定几率导致dict对象的内存泄漏，dict弹出用完后未施放。专门写了个小程序通过长时间实验，确定了，bug！！！！<br>

&#160; &#160; &#160; &#160;去support页报bug时顺手搜了一下，有个外国友人也发现了这个问题。<br>

&#160; &#160; &#160; &#160;这个问题应该挺难发现因为在高速、频繁的插入，弹出，删除dict时才会出现。初次发现就是对积累视频包管理业务调试的时候，在大量视频包流动的情况下，持续一个小时，内存占用才达到系统的报警线。所以这个内存泄漏几率低，也很难发现。毕竟手机上的应用都比较轻量级，会这么干的机会不多。


&#160; &#160; &#160; &#160;**最后：大量数据流操作不要用objc对象！！！！***（我承认这段话是从上一篇里复制过来的）*